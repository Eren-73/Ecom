<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üì¶ Commande #{{ order.order_number }}</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
    body {
        font-family: 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 40px 0;
    }

    .order-container {
        max-width: 900px;
        margin: 0 auto;
    }

    .order-card {
        background: white;
        border-radius: 20px;
        padding: 35px;
        margin-bottom: 25px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }

    .order-header {
        border-bottom: 2px solid #f0f0f0;
        padding-bottom: 20px;
        margin-bottom: 25px;
    }

    .order-number {
        color: #667eea;
        font-size: 1.8rem;
        font-weight: 700;
    }

    .status-badge {
        padding: 10px 20px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 1rem;
    }

    .status-pending { background: #ffc107; color: #000; }
    .status-processing { background: #17a2b8; color: white; }
    .status-shipped { background: #007bff; color: white; }
    .status-delivered { background: #28a745; color: white; }
    .status-cancelled { background: #dc3545; color: white; }

    .timeline {
        position: relative;
        padding: 20px 0;
    }

    .timeline-item {
        display: flex;
        gap: 15px;
        margin-bottom: 20px;
        position: relative;
    }

    .timeline-icon {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: #e0e0e0;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }

    .timeline-icon.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .order-item {
        border: 2px solid #f0f0f0;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 20px;
    }

    .item-image {
        width: 80px;
        height: 80px;
        object-fit: cover;
        border-radius: 10px;
    }

    .item-price {
        color: #667eea;
        font-size: 1.3rem;
        font-weight: 700;
    }

    .summary-line {
        display: flex;
        justify-content: space-between;
        padding: 10px 0;
        font-size: 1.1rem;
    }

    .total-amount {
        font-size: 2rem;
        font-weight: 700;
        color: #667eea;
        padding-top: 15px;
        border-top: 2px solid #f0f0f0;
        margin-top: 15px;
    }
</style>
</head>
<body>
    <div class="container order-container">
        <div class="order-card">
            <div class="order-header">
                <div class="d-flex justify-content-between align-items-center flex-wrap">
                    <div>
                        <div class="order-number">Commande #{{ order.order_number }}</div>
                        <small class="text-muted">Pass√©e le {{ order.created_at|date:"d/m/Y √† H:i" }}</small>
                    </div>
                    <span class="status-badge status-{{ order.status }}">
                        {% if order.status == 'pending' %}
                            <i class="fas fa-clock"></i> En attente
                        {% elif order.status == 'processing' %}
                            <i class="fas fa-cog fa-spin"></i> En traitement
                        {% elif order.status == 'shipped' %}
                            <i class="fas fa-shipping-fast"></i> Exp√©di√©e
                        {% elif order.status == 'delivered' %}
                            <i class="fas fa-check-circle"></i> Livr√©e
                        {% else %}
                            <i class="fas fa-times-circle"></i> Annul√©e
                        {% endif %}
                    </span>
                </div>
            </div>

            <h4 class="mb-3"><i class="fas fa-box"></i> Articles command√©s</h4>
            {% for item in items %}
            <div class="order-item">
                {% if item.product.image %}
                    <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" class="item-image">
                {% else %}
                    <div class="item-image d-flex align-items-center justify-content-center" style="background: #f0f0f0;">
                        <i class="fas fa-image fa-2x text-muted"></i>
                    </div>
                {% endif %}
                <div class="flex-grow-1">
                    <h5 class="mb-1">{{ item.product.name }}</h5>
                    <p class="text-muted mb-1">
                        <i class="fas fa-store"></i> {{ item.product.vendor.business_name }}
                    </p>
                    <span class="badge bg-secondary">Quantit√©: {{ item.quantity }}</span>
                </div>
                <div class="item-price">{{ item.total_price }} ‚Ç¨</div>
            </div>
            {% endfor %}

            <div class="mt-4">
                <div class="summary-line">
                    <span>Sous-total</span>
                    <span>{{ order.total_amount }} ‚Ç¨</span>
                </div>
                <div class="summary-line">
                    <span>Livraison</span>
                    <span class="text-success fw-bold">GRATUIT</span>
                </div>
                <div class="summary-line total-amount">
                    <span>Total pay√©</span>
                    <span>{{ order.total_amount }} ‚Ç¨</span>
                </div>
            </div>
        </div>

        <div class="order-card">
            <h4 class="mb-3"><i class="fas fa-map-marker-alt"></i> Adresse de livraison</h4>
            <p class="mb-0">{{ order.shipping_address }}</p>
        </div>

        <div class="text-center">
            <a href="{% url 'dashboard_customer' %}" class="btn btn-lg btn-light">
                <i class="fas fa-arrow-left"></i> Retour au dashboard
            </a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
