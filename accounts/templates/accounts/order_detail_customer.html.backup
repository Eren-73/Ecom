{% load accounts_filters %}
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>D√©tails de la commande #{{ order.order_number }}</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    body { background: #f8f9fa; font-family: 'Segoe UI', sans-serif; }
    .badge-status { font-size: 0.9em; font-weight: bold; }
    .summary-card, .products-card, .btn-container { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .products-card table th { background-color: #007bff; color: white; }
    .products-card table td { background-color: #f9f9f9; }
    .btn-back, .btn-home { border-radius: 8px; transition: 0.3s; }
    .btn-back:hover { background-color: #0056b3; color: white; }
    .btn-home:hover { background-color: #0056b3; color: white; }
    h1 { margin-bottom: 20px; }
    h2 { margin-bottom: 15px; color: #007bff; }
</style>
</head>
<body>

<div class="container my-5">
    <h1 class="text-center">D√©tails de la commande #{{ order.order_number }}</h1>
    <div class="text-center mb-3">
        <span class="badge badge-status 
            {% if order.status == 'pending' %}bg-warning{% elif order.status == 'confirmed' %}bg-info{% elif order.status == 'processing' %}bg-primary{% elif order.status == 'shipped' %}bg-secondary{% elif order.status == 'delivered' %}bg-success{% elif order.status == 'cancelled' %}bg-danger{% endif %}">
            {{ order.get_status_display }}
        </span>
        <p class="mt-2">Date : {{ order.created_at|date:"d/m/Y H:i" }}</p>
    </div>

    <!-- R√©sum√© livraison -->
    <div class="summary-card">
        <h2>Adresse de livraison</h2>
        <p><strong>Nom :</strong> {{ order.customer.first_name }} {{ order.customer.last_name }}</p>
        <p><strong>Email :</strong> {{ order.customer.email }}</p>
        <p><strong>Adresse :</strong> {{ order.shipping_address }}</p>
    </div>

    <!-- Produits command√©s -->
    <div class="products-card">
        <h2>Produits command√©s</h2>
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Produit</th>
                        <th>Prix unitaire</th>
                        <th>Quantit√©</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in order.items.all %}
                    <tr>
                        <td>{{ item.product.name }}</td>
                        <td>{{ item.price }} ‚Ç¨</td>
                        <td>{{ item.quantity }}</td>
                        <td>{{ item.price|multiply:item.quantity }} ‚Ç¨</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <p class="text-end fw-bold fs-5">Montant total : {{ order.total_amount }} ‚Ç¨</p>
    </div>

    <!-- Boutons -->
    <div class="btn-container d-flex justify-content-between">
        <a href="{% url 'dashboard_customer' %}" class="btn btn-primary btn-back">‚Üê Retour au Dashboard</a>
        <a href="{% url 'home' %}" class="btn btn-primary btn-home">üè† Accueil</a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
